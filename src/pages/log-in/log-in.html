<ion-header>
  <ion-navbar>
    <ion-title text-center>
      <strong>{{"LogIn" | translate}}</strong>
    </ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <img *ngIf="User" class="copmImg" src="{{User.ComImg}}" />
  <img *ngIf="!User" class="copmImg" src="assets/img/logo.png" />
  <ion-list no-lines>
    <form [formGroup]="logInForm" (ngSubmit)="onSubmit()">
      <!-- <div *ngIf="!companyNameExisted"> -->
        <ion-item *ngIf="!companyNameExisted">
          <ion-label floating>
            <ion-icon name="aperture"></ion-icon>&nbsp; {{"compName" | translate}}</ion-label>
          <ion-input type="text" #txtCompanyName formControlName="companyName" (ionBlur)="InputBlured(txtCompanyName.ngControl.name)"
            (ionFocus)="InputFocused(txtCompanyName.ngControl.name)"></ion-input>
        </ion-item>
        <ion-item *ngIf="!logInForm.get('companyName').required && companyNameRequired">
          <ion-label style="color:crimson"> {{"compRequir" | translate}} </ion-label>
        </ion-item>
        <span *ngIf="!logInForm.controls.companyName.valid && (logInForm.controls.companyName.dirty) ">
          <ion-label *ngIf="logInForm.get('companyName').hasError('wrongurl')" style="color:crimson ">{{logInForm.get('companyName').getError('wrongurl')}}</ion-label>
        </span>
      <!-- </div> -->







      <!-- <div *ngIf="!userNameExisted"> -->
        <ion-item *ngIf="!userNameExisted">
          <ion-label floating>
            <ion-icon name="person"></ion-icon>&nbsp; {{"Username" | translate}}</ion-label>
          <ion-input type="text" formControlName="userName" #txtUserName (ionBlur)="InputBlured(txtUserName.ngControl.name)" (ionFocus)="InputFocused(txtUserName.ngControl.name)"></ion-input>
        </ion-item>
        <ion-item *ngIf="!logInForm.get('userName').required && userNameRequired">
          <ion-label style="color:crimson "> {{"userRequir" | translate}}</ion-label>
        </ion-item>
      <!-- </div> -->

      <!-- <div > -->
        <ion-item *ngIf="userNameExisted">
          <h2>
            <span id="lbl_UserName">
              {{"Welcome" | translate}} {{User.LocalName}}
            </span >
            <!-- <span>{{"lastLogin" | translate}} {{User.LastLogin}}</span> -->
            <span>{{"lastLogin" | translate}} {{lastLogin}}</span>
            
          </h2>
          <img *ngIf="User" class="empimage" src="{{User.EmpImg}}" />
          <img *ngIf="!User" class="empimage" src="assets/img/user.png" />
        </ion-item>
      <!-- </div> -->






      <!-- <div> -->
        <ion-item>
          <ion-label floating>
            <ion-icon name="create"></ion-icon>&nbsp; {{"Password" | translate}}</ion-label>

          <ion-input type="{{type}}" formControlName="password" #txtPassword (ionBlur)="InputBlured(txtPassword.ngControl.name)" (ionFocus)="InputFocused(txtPassword.ngControl.name)">
          </ion-input>
          <button *ngIf="!showPass" ion-button icon-only clear color="dark" type="button" item-right (click)="showPassword()">
            <ion-icon name="eye-off"></ion-icon>
          </button>
          <button *ngIf="showPass" ion-button icon-only clear color="dark" type="button" item-right (click)="showPassword()">
            <ion-icon name="eye"></ion-icon>
          </button>
        </ion-item>
        <ion-item *ngIf="!logInForm.get('password').required && passwordRequired">
          <ion-label style="color:crimson"> {{"passRequir" | translate}} </ion-label>
        </ion-item>
      <!-- </div> -->

      <br/>








      <ion-item>
          <ion-label>{{"remmberMe" | translate}}</ion-label>
          <ion-checkbox formControlName="rememberMe" color="primary"></ion-checkbox>
          <a (click)="forgetPassword()">{{"forgetPassword" | translate}}</a>
        </ion-item>
      <br/>

      <ion-item>
          <a (click)="forgetPassword()">{{"forgetPassword" | translate}}</a>
        </ion-item>
      <br/>
      <div *ngIf="generalError">
        <ion-item *ngIf="generalError">
          <ion-label text-center style="color:crimson" text-wrap>{{generalError}}</ion-label>
        </ion-item>
        <br/>

      </div>
      <button ion-button color="primary" block large round [disabled]="!logInForm.valid">
        <ion-icon name="log-in"></ion-icon>&nbsp;&nbsp;&nbsp; {{"LogIn" | translate}}</button>


    </form>

  </ion-list>
  
  <button ion-button color="danger" (click)="Logout()" block large round>
    <ion-icon name="log-out"></ion-icon>&nbsp;&nbsp;&nbsp; {{"LogOut" | translate}}</button>
    <!-- ////////////////////////////////////////////////////////////////////////// -->
  <!-- <button ion-button (click)="tasks()">{{"Tasks" | translate}}</button> -->
  <!-- ////////////////////////////////////////////////////////////////////////// -->
</ion-content>